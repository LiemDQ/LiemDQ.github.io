<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>There is no Kantrowitz limit - Liem Dam-Quang</title><meta name=description content="Anyone who&rsquo;s somewhat interested in mass transportation systems is bound to have looked into the Hyperloop concept at one point or another. One of the things that came up during my research was something called the &lsquo;Kantrowitz limit&rsquo;.
What is the Kantrowitz limit? I admittedly had never heard of it before, but it seemed like something very important that fortunately had technological solutions. Yet there was something unsatisfying about all the popular resources I could find about it."><link rel=icon type=image/x-icon href=https://liem.ca/favicon.ico><link rel=apple-touch-icon-precomposed href=https://liem.ca/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://liem.ca/css/style.min.9368724fa1cf2a1a0afcbf8ac7a41cee17824e2575ec2c6b04a90fb0568659df.css integrity="sha256-k2hyT6HPKhoK/L+Kx6Qc7heCTiV17CxrBKkPsFaGWd8="><script src=https://liem.ca/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="There is no Kantrowitz limit"><meta property="og:description" content="Anyone who&rsquo;s somewhat interested in mass transportation systems is bound to have looked into the Hyperloop concept at one point or another. One of the things that came up during my research was something called the &lsquo;Kantrowitz limit&rsquo;.
What is the Kantrowitz limit? I admittedly had never heard of it before, but it seemed like something very important that fortunately had technological solutions. Yet there was something unsatisfying about all the popular resources I could find about it."><meta property="og:type" content="article"><meta property="og:url" content="https://liem.ca/posts/kantrowitz/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-16T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-16T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="There is no Kantrowitz limit"><meta name=twitter:description content="Anyone who&rsquo;s somewhat interested in mass transportation systems is bound to have looked into the Hyperloop concept at one point or another. One of the things that came up during my research was something called the &lsquo;Kantrowitz limit&rsquo;.
What is the Kantrowitz limit? I admittedly had never heard of it before, but it seemed like something very important that fortunately had technological solutions. Yet there was something unsatisfying about all the popular resources I could find about it."><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;600;700&family=Roboto:wght@100;300;700&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;1,200;1,300;1,400;1,600&display=swap" rel=stylesheet></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><h1 class=site-title><a href=/>Liem Dam-Quang</a></h1><ul class=social-icons><li><a href=https://github.com/LiemDQ title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href=https://www.linkedin.com/in/liem-dam-quang/ title=Linkedin rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></li><li><a href=mailto:liem.daq@gmail.com title=Email rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></span></a></li><li><a href=https://liem.ca/index.xml title=RSS rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></span></a></li><button class=theme-switcher>
<span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path fill="currentcolor" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span></button>
<script>const STORAGE_KEY="user-color-scheme",defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton&&(switchButton.innerHTML=currentTheme=="dark"?`\u003cspan class="inline-svg" \u003e




    
\u003csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"\u003e\u003ccircle cx="12" cy="12" r="5"\u003e\u003c/circle\u003e\u003cline x1="12" y1="1" x2="12" y2="3"\u003e\u003c/line\u003e\u003cline x1="12" y1="21" x2="12" y2="23"\u003e\u003c/line\u003e\u003cline x1="4.22" y1="4.22" x2="5.64" y2="5.64"\u003e\u003c/line\u003e\u003cline x1="18.36" y1="18.36" x2="19.78" y2="19.78"\u003e\u003c/line\u003e\u003cline x1="1" y1="12" x2="3" y2="12"\u003e\u003c/line\u003e\u003cline x1="21" y1="12" x2="23" y2="12"\u003e\u003c/line\u003e\u003cline x1="4.22" y1="19.78" x2="5.64" y2="18.36"\u003e\u003c/line\u003e\u003cline x1="18.36" y1="5.64" x2="19.78" y2="4.22"\u003e\u003c/line\u003e\u003c/svg\u003e

\u003c/span\u003e
`:`\u003cspan class="inline-svg" \u003e




    
\u003csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"\u003e\u003cpath fill="currentColor" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"\u003e\u003c/path\u003e\u003c/svg\u003e

\u003c/span\u003e
`)}function switchTheme(){currentTheme=="dark"?(localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></ul></div><nav><a href=https://liem.ca/posts/ title>Posts</a>
<a href=https://liem.ca/projects/ title>Projects</a>
<a href=https://liem.ca/categories/ title>Categories</a>
<a href=https://liem.ca/about/ title>About</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">There is no Kantrowitz limit</h1></header></div><div class="content e-content"><p>Anyone who&rsquo;s somewhat interested in mass transportation systems is bound to have looked into the Hyperloop concept at one point or another. One of the things that came up during my research was something called the &lsquo;Kantrowitz limit&rsquo;.</p><p>What is the Kantrowitz limit? I admittedly had never heard of it before, but it seemed like something very important that fortunately had technological solutions. Yet there was something unsatisfying about all the popular resources I could find about it. They all seemed to be very surface level, and when I started looking into it the rabbit hole ended up going a lot deeper than I expected, so I am writing this in the hopes that it might be useful to someone else one day.</p><h2 id=kantrowitz-limit-the-elevator-pitch>Kantrowitz limit: the elevator pitch
<span><a href=#kantrowitz-limit-the-elevator-pitch><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>The Kantrowitz limit is a theoretical compressible gas dynamics restriction that places a limit on the flow velocity. It was first derived in 1945 by Arthur Kantrowitz, a physicist and aerospace engineer, from whom it received its namesake, but remained relatively obscure—<a href=https://www.mheducation.com/highered/product/modern-compressible-flow-historical-perspective-anderson/M9781260471441.html><em>Modern Compressible Flow</em> by John D. Anderson</a>, the quintessential textbook for gas dynamics, for example, has no mention of it—until 2013, when it was reintroduced into the mainstream engineering lexicon when Elon Musk proposed his Hyperloop concept for futuristic, high-speed travel.</p><p>Musk is a little vague about the Kantrowitz limit in his <a href=https://www.tesla.com/sites/default/files/blog_images/hyperloop-alpha.pdf>Hyperloop white paper</a>, and doesn&rsquo;t really explain any of the technical details, except that it&rsquo;s an important consideration when designing the Hyperlood pods. As he explains:</p><blockquote><p>Whenever you have a capsule or pod (I am using the words interchangeably) moving at high speed through a tube containing air, there is a minimum tube to pod area ratio below which you will choke the flow. What this means is that if the walls of the tube and the capsule are too close together, the capsule will behave like a syringe and eventually be forced to push the entire column of air in the system.</p></blockquote><p>While this is possibly useful to laymen, it is a phenomenological explanation: it describes <em>what</em> is happening, but doesn&rsquo;t elaborate on <em>why</em>. Thankfully, the <a href=https://en.wikipedia.org/wiki/Kantrowitz_limit>Wikipedia article</a> has a fairly succinct explanation:</p><blockquote><p>If a near supersonic flow experiences an area contraction, the velocity of the flow will increase until it reaches the local speed of sound, and the flow will be choked. This is the principle behind the Kantrowitz limit: it is the maximum amount of contraction a flow can experience before the flow chokes, and the flow speed can no longer be increased above this limit, independent of changes in upstream or downstream pressure.</p></blockquote><p>Seems simple enough. The Kantrowitz limit is related to the gas dynamics at near-sonic flow velocities. For vehicles moving at near-supersonic speeds through a tunnel (i.e. Hyperloop pods), the Kantrowitz limit places a design constraint on the ratio of the diameter of the pod to the diameter of the tube.</p><h2 id=whats-the-hiccup>What&rsquo;s the hiccup?
<span><a href=#whats-the-hiccup><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>All of this is sensible and seems well and good&mldr; except that this is a <em>really, really basic concept that is known by anyone who has studied gas dynamics or aerodynamics at all</em>. I&rsquo;m not trying to be an elitist here: <a href=https://en.wikipedia.org/wiki/Choked_flow>choked flow</a> is probably taught by the second or third week of any undergraduate level gas dynamics course.</p><p>So clearly, there should be more to it than this if someone got their name attached to it! Maybe the Wikipedia explanation was incomplete? What do other online sources on it say? There&rsquo;s a surprising dearth of information—most of the articles I found only give a high level explanation of the Hyperloop. Those that <em>do</em> dive into the relevant physics, despite otherwise widely ranging in credibility, all seem to just repeat what was said in the Hyperloop whitepaper.</p><p>Here are a few examples:</p><ul><li><a href=https://mappingignorance.org/2018/02/07/the-limits-of-hyperloop/>This article</a> by Mapping Ignorance repeats the &ldquo;syringe effect&rdquo;, and also cites an equation that seems to have been taken from the Wikipedia article<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</li><li><a href=https://www.cnbc.com/2016/07/13/here-is-how-hyperloop-will-work-theoretically.html>CNBC&rsquo;s article</a> doesn&rsquo;t really mention the concept and just explains that compressor fan will &ldquo;transfer high air pressure from [the pod&rsquo;s] front to the rear and sides&rdquo;.</li><li>Brilliant.org has a section on the <a href=https://brilliant.org/wiki/hyperloop/#physics-of-the-hyperloop>Physics of Hyperloop</a> where they also repeat the same claims about the Kantrowitz limit and the syringe effect. They directly quote the white paper on this.</li><li><a href=https://jalopnik.com/the-key-innovation-that-makes-the-hyperloop-work-1113028439>An article</a> by Jalopnik specifically about the Kantrowitz limit just uncritically rephrases what Musk wrote, but it does cite <a href=https://web.archive.org/web/20130217232130/http://ftp.rta.nato.int/public//PubFullText/RTO/EN/RTO-EN-AVT-185///EN-AVT-185-09.pdf>a paper</a> on the topic! But this paper assumes that you already know what the limit is, so some more digging is required.</li><li>I also found <a href=https://www.hyperloopdesign.net/airflow>this</a> from a site called HyperloopDesign.net which claims that there is no Kantrowitz limit for Hyperloop pods. However, their explanation of the relevant physics seems very dubious<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, so I&rsquo;m not going to consider their argument further.</li></ul><h2 id=so-what-is-the-kantrowitz-limit-really>So what is the Kantrowitz limit, really?
<span><a href=#so-what-is-the-kantrowitz-limit-really><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Without a satisfactory explanation, I decided to read the <a href=https://apps.dtic.mil/dtic/tr/fulltext/u2/b184216.pdf>original 1945 paper</a><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> by Kantrowitz and Donaldson. They were studying the design of diffusers for supersonic air streams (i.e. air intakes for supersonic planes). In short, the Kantrowitz limit has to do with the stability of normal shocks in variable-area ducts when decelerating gases from supersonic to subsonic velocities.</p><h3 id=choked-flow-an-explanation>Choked flow: an explanation
<span><a href=#choked-flow-an-explanation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Let&rsquo;s do a brief aside and discuss the concept of choked flow, since it is rather critical to understanding the issue at hand. You can skip this section if you are already familiar with the relevant physics.</p><p>Consider a gas flowing through a variable-area duct<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>. As the area of the duct shrinks, the gas must either speed up or compress (become denser) to maintain the same mass flow rate. The maximum speed that the gas can reach through a reduction in area is the speed of sound. Once this speed is reached, any further reduction in area cannot increase the speed further (and in fact the gas will always reach Mach 1 at the vena contracta, or point with the smallest cross-sectional area, as long as this area is below the critical area).</p><p><figure><img src=/img/kantrowitz/subsonic_choke_no_accel.png alt="Example of choked flow"><figcaption>Flow through a converging duct, right at the point where the flow chokes (throat velocity has reached Mach 1).</figcaption></figure></p><p>At this point, any further reduction of the pressure downstream of the duct will not influence the flow rate; it is considered choked. However, increasing the pressure upstream <em>will</em> increase the mass flow rate by increasing the density of the gas, but the volumetric flow rate will remain roughly the same. So there is a &ldquo;critical&rdquo; amount of shrinkage the duct area can undergo before the flow reaches Mach 1. This, of course, depends on how much the gas decides to speed up vs. compress when the area is reduced, and the &ldquo;speed-up-to-densification&rdquo; ratio depends on the assumptions you make of the gas.</p><p>Most commonly, we assume that the gas is <a href=https://en.wikipedia.org/wiki/Perfect_gas>calorically perfect</a><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>, and that the compression process is isentropic. In this case, the relationship between the choking contraction ratio and the airspeed is known as the <em>area-Mach number relation</em>:</p><p>$$
\frac{1}{\text{Contraction ratio}} = \frac{A^*}{A} = M\left[\frac{2}{\gamma+1}\left(1 + \frac{\gamma-1}{2}M^2\right)\right]^{-\frac{\gamma+1}{2(\gamma-1)}}
$$</p><p>Where $M$ is the <a href=https://en.wikipedia.org/wiki/Mach_number>Mach number</a> at some point in the duct (usually the entrance), $A$ is the area at the point in the duct where $M$ was taken, $A^*$ is the cross-sectional area at the minimum area of the duct (known as the <em>throat</em>), and $\gamma$ is the <a href=https://en.wikipedia.org/wiki/Heat_capacity_ratio>heat capacity ratio</a>, which varies depending on the gas but for air is roughly equal to 1.4. The interesting thing about this equation is how the contraction ratio only depends on the Mach number; there are no variables for temperature, pressure, density, etc.</p><p><figure><img src=/img/kantrowitz/compression_ratio_to_mach_annot.png alt="Area-Mach number relation"><figcaption>The area-Mach number relation creates a 'U' shaped curve. Inside the U, the flow will be choked, and outside, the flow will be unchoked.</figcaption></figure></p><p>Something worth noting is that there are actually two solutions of $M$ for a given contraction ratio: one for $M&lt;1.0$ and one for $M>1.0$. This means for any given ratio, there is a subsonic speed below which the flow will not choke and a supersonic speed above which the flow will not choke, surprisingly enough.</p><p><figure><img src=/img/kantrowitz/subsonic-acceleration.png alt="Accelerating subsonic flow"><figcaption>Subsonic flow is accelerated in a converging nozzle and chokes at the throat. If the duct diverges after, the flow can accelerate to supersonic speeds.</figcaption></figure>This is also the principle behind rocket engine nozzles: a convergent-divergent nozzle will accelerate a gas from subsonic to supersonic velocities as long as the pressure drop is sufficiently high.</p><h3 id=the-problem-with-supersonic-deceleration>The problem with supersonic deceleration
<span><a href=#the-problem-with-supersonic-deceleration><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Since this process is isentropic and therefore reversible, one would imagine that the opposite scenario should also be possible: a converging-diverging inlet that decelerates supersonic gas to subsonic velocities.</p><p><figure><img src=/img/kantrowitz/supersonic-deceleration.png alt="Decelerating supersonic flow"><figcaption>Smooth deceleration of a supersonic stream. In practice, this is not achievable.</figcaption></figure></p><p>In practice, however, this kind of arrangement is not possible to achieve and maintain. There are two problems.</p><p>The first is that generally, before reaching a supersonic velocity, the system has to first accelerate through a subsonic regime. And a subsonic flow will <em>also</em> choke the inlet, but at a much lower mass flow rate. As the system speeds up in the subsonic regime, some of the gas must get diverted away from the inlet as it cannot &ldquo;fit&rdquo; through the throat. The ratio of air diverted away to air entering the inlet is called the <em>capture ratio</em>.</p><p><figure><img src=/img/kantrowitz/subsonic-choked.png alt="Choked sonic deceleration"><figcaption>Choked inlet at subsonic speeds. Some of the flow that would otherwise have entered the inlet is deflected away due to the pressure buildup.</figcaption></figure></p><p>As the airspeed increases further and turns supersonic, the gas can no longer turn away in time (since it cannot receive information faster than the speed of sound). A bow shock will form in front of the inlet, and the subsonic gas on the other side <em>can</em> turn away from the inlet, maintaining mass continuity.</p><p><figure><img src=/img/kantrowitz/sonic-choked-deceleration.png alt="Choked supersonic deceleration"><figcaption>Once the system settles at its (supersonic) cruising speed, a bow shock will form in front of the inlet. This leads to massive pressure losses, while the flow inside the duct is subsonic.</figcaption></figure></p><p>The second problem is that even if a smooth supersonic deceleration is achieved, it is inherently unstable. Since the outgoing flow is subsonic, information about disturbances downstream (such as pressure fluctuations) would be able to propagate through it, lowering the mass flow rate, if only temporarily. However, since the entering gas is supersonic, information cannot propagate upstream through it, and its mass flow rate will remain unchanged. As Kantrowitz explains, &ldquo;it therefore appears that isentropic deceleration through the speed of sound in channels is unstable and unattainable in practice.&rdquo;</p><p><figure><img src=/img/kantrowitz/unstable-shock.png alt="Unstable shock"><figcaption>As the shock moves backwards, it becomes stronger as the flow at the new location is traveling faster, which leads to an even greater pressure drop, causing a feedback loop until the shock is ejected from the inlet.</figcaption></figure></p><h3 id=implications-of-shock-waves>Implications of shock waves
<span><a href=#implications-of-shock-waves><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Shocks are highly irreversible phenomena and will lead to significant amounts of energy dissipation. The total losses across the shock wave are captured by the drop in stagnation pressure. The stagnation pressure drop across a shock wave is given by the following equation:
$$
\frac{p_{t2}}{p_{t1}} = \left(\frac{\frac{\gamma+1}{2}M_1^2}{1 + \frac{\gamma-1}{2}M_1^2}\right)^{\frac{\gamma}{\gamma-1}} \left(\frac{1}{\frac{2\gamma}{\gamma+1}M_1^2 - \frac{\gamma-1}{\gamma+1}}\right)^{\frac{1}{\gamma-1}}
$$
Where $p_t$ is the total, or stagnation pressure, and the subscripts 1 and 2 denote before and after the shock, respectively. The stagnation pressure, is, in turn, directly proportional to the mass flow rate through the duct, as given by the following equation:
$$
\dot m = \frac{p_t A}{\sqrt{T_t}}\sqrt{\frac{\gamma}{R}}\left(\frac{\gamma+1}{2}\right)^{-\frac{\gamma+1}{2(\gamma-1)}}
$$
For a given duct area $A$, the mass flow rate depends on the total pressure and the total temperature. Because a shock is adiabatic, the stagnation temperature does not change across a shock, so $\dot m \propto p_t$ only.</p><p><figure><img src=/img/kantrowitz/shock_pressure_recovery.png alt="Pressure recovery"><figcaption>Pressure recovery of air across a normal shock, depending on supersonic Mach number</figcaption></figure></p><p>Thus, a shock wave will result in total pressure losses. These losses will reduce the mass flow rate through the inlet by the proportional drop in the pressure. A smaller mass flow rate means a smaller throat area is needed to choke the flow.</p><p><strong>So the Kantrowitz limit basically is just the area-Mach number relation multiplied by the stagnation pressure ratio across a normal shock.</strong></p><h3 id=effect-of-the-kantrowitz-limit>Effect of the Kantrowitz &ldquo;limit&rdquo;
<span><a href=#effect-of-the-kantrowitz-limit><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Writing out the equation, the Kantrowitz limit is the area ratio denoted by:
$$
\overbrace{\frac{A_4}{A_0}}^{\text{area ratio}} =
\overbrace{M\left[\frac{2}{\gamma+1}\left(1 + \frac{\gamma-1}{2}M^2\right)\right]^{-\frac{\gamma+1}{2(\gamma-1)}}
}^{\text{area-Mach number relation}}
\underbrace{
\left(\frac{\frac{\gamma+1}{2}M^2}{1 + \frac{\gamma-1}{2}M^2}\right)^{\frac{\gamma}{\gamma-1}} \left(\frac{1}{\frac{2\gamma}{\gamma+1}M^2 - \frac{\gamma-1}{\gamma+1}}\right)^{\frac{1}{\gamma-1}}
}_{\text{stagnation pressure ratio across normal shock}}
$$
Simplifying and rearranging gives us the same form as the <a href=https://en.wikipedia.org/wiki/Kantrowitz_limit#Derivation_of_Kantrowitz_limit>Wikipedia article</a>:
$$
\frac{A_4}{A_0} = M_0 \left(\frac{\gamma+1}{2+(\gamma -1)M_0^2}\right)^{-\frac{\gamma+1}{2(\gamma-1)}}
\left[\frac{(\gamma+1)M_0^2}{(\gamma-1)M^2_0+2}\right]^\frac{-\gamma}{\gamma-1}
\left[\frac{\gamma+1}{2\gamma M^2_0-(\gamma-1)}\right]^\frac{-1}{\gamma-1}
$$</p><p>Plotting it out compared the basic isentropic compression case, it&rsquo;s clear that the shock will greatly limit the design contraction ratio.</p><p><figure><img src=/img/kantrowitz/kantrowitz_vs_isentropic.png alt="Kantrowitz limit vs isentropic compression"><figcaption>Comparison of the choking contraction ratio with the Kantrowitz limit and with isentropic flow. The Kantrowitz effect means that the flow chokes much sooner than it otherwise would.</figcaption></figure></p><p>The Kantrowitz limit is thus relevant when a supersonic flow needs to be decelerated to subsonic flow, such as is the case in air intake ducts on supersonic planes. It appears repeatedly in the literature mostly in papers dealing with the design of supersonic intake ducts.</p><p>And perhaps instead of &ldquo;limit&rdquo;, a more appropriate term would be &ldquo;effect&rdquo;, as it&rsquo;s not really a limit at all. It&rsquo;s an aerodynamics phenomenon that results in suboptimal mass flow/pressure recovery, but it&rsquo;s not an outright cap on the performance of a system, like the term &ldquo;limit&rdquo; would imply.</p><p>To my great surprise, it does seem like everyone has gotten this wrong—<em>no one</em> I found correctly explained this, and usually just parroted the &ldquo;syringe&rdquo; explanation from the Musk paper, despite the original paper by Kantrowitz being readily available online (and rather short: the meat and bones of it is only about 5 pages).</p><h2 id=overcoming-the-limit>Overcoming the limit
<span><a href=#overcoming-the-limit><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>The Kantrowitz &ldquo;effect&rdquo; is undesirable as the pressure losses across the shock lower the mass flow rate through the duct. The total pressure ratio is also known as the <em>pressure recovery</em>, with a perfect pressure recovery being a value of 1.</p><p>But as it isn&rsquo;t a hard limit, there are a few workarounds that can be employed to mitigate its effect. The general goal is to make the shock weaker, which will improve the pressure recovery. The most common way to do this is to move the shock wave into the inlet, <em>behind</em> the throat. In this position, it is stable, and is much weaker than if it were outside and in front of the inlet. This is often referred to as &ldquo;starting&rdquo; the inlet.</p><h3 id=overspeeding>Overspeeding
<span><a href=#overspeeding><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>The simplest solution is to temporarily overspeed the system above the design Mach number.</p><p>As the shock moves through the converging duct, a positive feedback loop will occur: its upstream Mach number will decrease, which means that the shock will <em>weaken</em>. This results in the throat experiencing an increased mass flow rate, which will reduce the shock backpressure which draws the shock further into the duct. Thus the shock will continue moving until it has passed through the throat.</p><p><figure><img src=/img/kantrowitz/stable-shock.png alt="Stable shock"><figcaption>In this position, the shock is stable. An increase in backpressure will push the shock back, but as it approaches the throat, it will weaken, improving the pressure recovery and causing a negative feedback loop that prevents it from being dislodged.</figcaption></figure></p><p>However, the opposite situation is also true. As previously mentioned, if the shock is placed at exactly the throat, and there is a temporary backpressure fluctuation, then that could be enough to knock the shock wave out of the inlet, leading to massive energy losses.</p><p><figure><img src=/img/kantrowitz/metastable-shock.png alt="Metastable shock"><figcaption>The shock is at its weakest in the throat (technically, at M = 1.0, there is no shock). But the slightest disturbance or fluctuation in backpressure can have it knocked off and spat out of the inlet, causing a very sudden and disruptive drop in pressure.</figcaption></figure></p><p>This is only a viable option for systems operating at relatively low Mach numbers. Beyond a design value of ~Mach 1.6 the amount of overspeeding needed becomes impractical from an engineering standpoint, and above Mach 1.9 it becomes flat out impossible.</p><p><figure><img src=/img/kantrowitz/overspeed.png alt="Overspeed graph"><figcaption>The overspeed required to start inlets designed for specific Mach numbers dramatically grows above design Mach numbers of 1.6. The dashed line is y = x, for reference purposes.</figcaption></figure></p><h3 id=increasing-the-throat-size>Increasing the throat size
<span><a href=#increasing-the-throat-size><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Kantrowitz and Donaldson propose a simple solution: increasing the throat size so that it chokes at a <em>subsonic</em> mass flow rate equal to the expected mass flow rate during supersonic operation at the design Mach number. This inlet design is also known as a Kantrowitz-Donaldson inlet, and it is <em>self-starting</em>, because it will naturally settle at the desirable equilibrium point.</p><p><figure><img src=/img/kantrowitz/kantrowitz-donaldson.png alt="Kantrowitz-Donaldson inlet"><figcaption>A Kantrowitz-Donaldson inlet has a wider throat which will automatically swallow the shock as soon as supersonic speeds are reached.</figcaption></figure></p><p>The downside is that the pressure recovery is lower than that of a normally-sized inlet since the inlet isn&rsquo;t designed for the desired mass flow rate. The larger throat means the gas will decelerate less before reaching the shock, resulting in more pressure losses. So the tradeoff is whether you want a self-starting inlet that works at ~85% performance or one that needs to be manually started but works at ~95% performance.</p><h3 id=using-variable-nozzles>Using variable nozzles
<span><a href=#using-variable-nozzles><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>In a similar vein, another solution is to adjust the size of the throat in real time to move the shock past the throat before closing it back up. This approach results in high pressure recovery (and therefore high performance), at the cost of complexity and additional weight.</p><h3 id=oblique-shocks>Oblique shocks
<span><a href=#oblique-shocks><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>The last solution is to use a geometry that will force the airflow to turn, producing a series of oblique shocks instead. These will lead to lower pressure losses than a single normal shock. These changes in angle are called <em>ramps</em>. This can be done through systems like <a href=https://en.wikipedia.org/wiki/Intake_ramp>intake ramps</a> or <a href=https://en.wikipedia.org/wiki/Inlet_cone>inlet cones</a>, which are a common sight on supersonic aircraft. Inlets that have these shocks occur outside of the inlet are called <em>external compression</em> inlets, while those with shocks that occur inside the intake are called <em>internal compression</em> inlets.</p><figure><img src=/img/kantrowitz/oblique_pressure_recovery.png><figcaption>Adding more oblique shocks improves pressure recovery, especially at high Mach numbers, but requires a more complicated inlet design. Source: <a href=https://arc.aiaa.org/doi/abs/10.2514/6.2005-7357>Ran and Mavris (2005)</a></figcaption><p>The design of these intakes is a complex topic with <em>a lot</em> of literature behind it, and beyond the scope of this post.</p><p><figure><img src=/img/kantrowitz/oblique-inlet.png alt="Oblique inlet design"><figcaption>An example of a two-ramp inlet design, also taken from Ran and Mavris.</figcaption></figure></p><h2 id=what-about-hyperloop>What about Hyperloop?
<span><a href=#what-about-hyperloop><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>A lot of these considerations pertain to the design of aircraft, but let&rsquo;s return to the original subject matter. The Kantrowitz limit doesn&rsquo;t seem to be relevant to Hyperloop systems at all. It necessarily only applies to <em>supersonic</em> systems. The vast majority of concepts I&rsquo;ve seen still have pods traveling at subsonic velocities, which means you wouldn&rsquo;t have the formation of a shock wave in front of the vehicle.</p><p>This doesn&rsquo;t mean that the flow <em>won&rsquo;t</em> choke, but the massive loss in stagnation pressure due to the shock is the reason why the choked mass flow rate will be significantly lower than what would otherwise be possible.</p><h3 id=what-will-actually-happen>What will actually happen?
<span><a href=#what-will-actually-happen><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>So far, I&rsquo;ve described the Kantrowitz effect in a scenario with free-flowing air, such as on aircraft: if the air cannot enter the duct, it simply flows around it. With Hyperloop, the situation is a bit different, since it&rsquo;s in a closed tunnel, and there&rsquo;s nowhere for the air to go except behind the the pod.</p><p>Based on the classical theory of gas dynamics, I would expect the following to happen as the Hyperloop capsule zips down the tube and reaches the choking velocity for its contraction ratio:</p><ul><li>The flow reaches Mach 1 at the narrowest point between the capsule and the tunnel.</li><li>Static pressure would build up in front of the capsule until the pressure is sufficient for the mass flow rates to equalize.</li><li>Depending on the pod geometry, the flow may briefly accelerate past Mach 1 before hitting a shock wave as it encounters the backpressure from the air behind the capsule.</li><li>The drag will increase due to the increased pressure in front as well as the wave drag from the shock wave.</li></ul><h3 id=is-a-compressor-worth-it>Is a compressor worth it?
<span><a href=#is-a-compressor-worth-it><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>So Hyperloop pods will likely experience an increase in drag as they approach the sonic condition in the bypass duct. But the key question is: how much extra drag?</p><p>This is where Musk&rsquo;s analogy of a syringe effect is, in my opinion, very misleading. The reason why the resistance of squeezing a plugged syringe rises so rapidly is because you are compressing the air to several multiples of its original pressure (presumably atmospheric). But in a tube that&rsquo;s presumably hundreds or thousands of miles long, this effect would be a lot less dramatic. Yes, the pressure in front of the pod increases, but this would have the effect of increasing the mass flow through the bypass (recall the mass flow equation), so the system would eventually reach a steady-state equilibrium, so the force wouldn&rsquo;t increase in an unbounded manner. But where does this steady state lie?</p><p>The answer to this question is very complex and requires the use of simulations to get meaningful answers. My gut feeling, based on drag profiles of transonic aircraft<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>, is that the increase in drag would significant, but it would be on the order of 3-4x more as opposed a complete showstopper like 100x<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup>. Since the drag of a a Hyperloop pod in near-vacuum conditions is already very low, it&rsquo;s questionable whether adding a compressor or other onboard system to mitigate the effect is worth it at all.</p><p>Obviously, this depends on how big the pod is relative to the tunnel. But I suspect that other practical considerations, such as engineering tolerances and supporting equipment, will place an upper limit on the pod size before the drag from densified air in front becomes the main consideration.</p><h3 id=examples-from-a-study>Examples from a study
<span><a href=#examples-from-a-study><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>One good example would be <a href="https://arc.aiaa.org/doi/abs/10.2514/1.J057103?journalCode=aiaaj">this 2018 paper by Opgenoord and Caplan</a> on Hyperloop pod aerodynamics, where they did some CFD studies on a pod design. It showcases some of the effects I previously mentioned.</p><p><figure><img src=/img/kantrowitz/hyperloop_annotated.png alt="Hyperloop CFD"><figcaption>CFD simulation of the MIT hyperloop pod, obtained from the paper linked above. Annotations are mine.</figcaption></figure></p><p>Their conclusion is that the drag coefficient does begin to increase significantly after choked flow is reached, but by a factor of ~3 for the speed range that they studied. They also concluded that adding a compressor would consume more energy than beefing up the propulsion system to deal with the increased drag. The difference is 231 kW to power the compressor vs. 31 kW to overcome drag—nearly an order of magnitude difference!</p><p><figure><img src=/img/kantrowitz/hyperloop_drag_coefficient.png alt="Hyperloop drag coefficient"><figcaption>Drag coefficient of the MIT hyperloop pod. The flow chokes at a pod speed of ~M = 0.675.</figcaption></figure></p><p>Despite this, a lot of the concept art for Hyperloops depicts pods with gigantic compressors in the front.<figure><img src=/img/kantrowitz/hyperloopstationzeleros.png alt="Hyperloop concept art"><figcaption>The compressor fans really help the cool factor though, and when it comes to multibillion dollar infrastructure projects, isn't that what counts?</figcaption></figure></p><h3 id=what-about-supersonic-hyperloop-pods>What about supersonic Hyperloop pods?
<span><a href=#what-about-supersonic-hyperloop-pods><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>It&rsquo;s true that supersonic pods have explicitly <em>not</em> been left off the table, even if there are no immediate plans for them. And at supersonic speeds, the <em>actual</em> Kantrowitz effect would indeed apply. A shock would form in front of the vehicle, but unlike in typical scenarios where it would take place, there is nowhere for the air to go, so once again you would see a pressure buildup between the shock and the pod. Depending on the shape of the vehicle and its relative position in the tunnel the shock could take on different shapes as well. But it&rsquo;s still somewhat questionable whether the use of a compressor is worth it, or whether there are other solutions, like the ones previously mentioned, that are simpler and more performant.</p><h3 id=what-does-this-mean-for-hyperloop>What does this mean for Hyperloop?
<span><a href=#what-does-this-mean-for-hyperloop><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Not much. This could be interpreted as a win for Hyperloop systems, as the analysis, <em>prima facie</em>, suggests that the aerodynamics are not a big problem. But I think the aerodynamics of the pod are a relatively unimportant part of the challenges with Hyperloop, although this facet has received a disproportionate amount of attention from the media (likely due to Musk&rsquo;s unconventional solution of using a compressor, unlike the other aspects of the concept which have been proposed for a long time already).</p><p>But make no mistake, there are many other hurdles—technical, practical, economical and political—that need to be cleared to make Hyperloop a reality. Other people have already covered this to death, so I won&rsquo;t go into more detail here.</p><h2 id=why-did-they-call-it-the-kantrowitz-limit>Why did they call it the Kantrowitz limit?
<span><a href=#why-did-they-call-it-the-kantrowitz-limit><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Everything we&rsquo;ve seen would suggest that what Musk calls the Kantrowitz limit is really just the area-Mach number relation, and to my knowledge there isn&rsquo;t a special name for it. Kantrowitz certainly doesn&rsquo;t think he came up with it, since he just mentions it offhandedly in the appendix of his paper, where he simply calls it the &ldquo;isentropic area-contraction ratio&rdquo;.</p><p>So why did Musk call it the Kantrowitz limit? To be honest, I&rsquo;m not sure&mldr; One could try to argue that the formation of the shock wave behind the choke point is reminiscent of the stable configuration described by Kantrowitz and Donaldson, but it&rsquo;s pretty clear from reading the paper that this isn&rsquo;t really what they were concerned about. And naively applying the Kantrowitz limit equation to subsonic systems will get you into trouble—as this graph shows, it results in an underestimation of the true bypass ratio needed&mldr; but these values are physically meaningless, since you can&rsquo;t have a shock at subsonic velocities!</p><p><figure><img src=/img/kantrowitz/kantrowitz_error.png alt="Kantrowitz error"><figcaption>Percentage error from applying the Kantrowitz limit equations at subsonic velocities.</figcaption></figure></p><p>But with that said, if there is a distinction to make here, it&rsquo;s a mostly pedantic one. From quickly skimming a few of these papers, I don&rsquo;t think any serious engineers or scientists made this mistake. It seems to be a purely nomenclature thing. Here&rsquo;s a graph from the prior CFD paper on the blockage ratio vs. free-stream Mach number, reproduced side-by-side with just the area-Mach number equations. Their results are correct—they just called it something it ain&rsquo;t.</p><p><figure><img src=/img/kantrowitz/blockage_to_freestream_comparison.png alt="Freestream graph comparison"><figcaption>Left: Plot from Opgenoord and Caplan. Right: Plot of freestream Mach number using area-Mach relations.</figcaption></figure></p><p>So it seems that before 2013, the Kantrowitz limit was a niche phenomenon that applied to supersonic inlet duct design and was used almost exclusively in that context. After Musk published his white paper, everyone has since erroneously ascribed it to the phenomenon of choked flow and it has since been taken up and popularized <a href="https://youtu.be/DnmPcJ6OiBg?t=76">by</a> <a href="https://youtu.be/HYrO03vqm4Q?t=448">everyone</a> <a href="https://youtu.be/I8sOxSa3j3g?t=56">else</a><sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup>. It&rsquo;s a prime example of <a href=https://xkcd.com/978/>citogenesis</a>.</p><p><img src=/img/kantrowitz/kantrowitz_youtubers.jpeg alt=Youtubers></p><h3 id=is-there-a-kantrowitz-limit-at-all>Is there a Kantrowitz limit at all?
<span><a href=#is-there-a-kantrowitz-limit-at-all><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Technically, yes. So the title is a little bit of a clickbait. But it has a very specific technical meaning—it refers to the maximum unchoked contraction ratio of a duct that is specifically:</p><ul><li>Naively designed</li><li>In a supersonic stream</li><li>Unstarted</li></ul><p>It doesn&rsquo;t seem that these criteria, with perhaps the exception of the first one, apply to Hyperloop. And as we&rsquo;ve seen, it&rsquo;s clear that the issues described by the limit likely aren&rsquo;t issues at all. I am not up-to-date with the latest developments in Hyperloop technology, but other people seem to be reaching the same conclusions: Virgin Hyperloop pods, for example, don&rsquo;t seem to be doing very much to mitigate the drag from choked flow.</p><p><figure><img src=/img/kantrowitz/virgin_hyperloop.jpg alt="Virgin HyperloopOne"><figcaption>No compressor?</figcaption></figure></p><p>At the very least, it seems that the Wikipedia pages on the <a href=https://en.wikipedia.org/wiki/Kantrowitz_limit>Kantrowitz limit</a> and <a href=https://en.wikipedia.org/wiki/Hyperloop>Hyperloop</a>, at the time of writing, have some glaring inaccuracies.</p><p>All this, of course, needs to come with several caveats. I haven&rsquo;t spent that much time looking into current-gen Hyperloop technologies, and I may have missed other people&rsquo;s solutions to the pod aerodynamics. I&rsquo;m also not an expert on compressible gas dynamics, so there&rsquo;s always the possibility that I am mistaken somewhere. If someone has more information than me about this, please <a href=mailto:liem.daq@gmail.com>get in touch</a>—I&rsquo;d love to know!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>I actually have no idea where this equation comes from. The paper that Wikipedia cites doesn&rsquo;t have it, and from what I can tell it doesn&rsquo;t match up with any of the classical equations I am familiar with. My suspicion is that it was incorrectly transcribed from a derivation of the Kantrowitz limit, since it lines up qualitatively. Hopefully it isn&rsquo;t used for anything serious&mldr;&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>I&rsquo;m not sure what to even make of their claims. The Kantrowitz limit equation <em>is specifically</em> for compressible fluids. Why would they think that we&rsquo;ve overlooked the fact that gases become compressible at transonic velocities? And what they do mean by supersonic flow &ldquo;compressing&rdquo; the gas along the tunnel? Supersonic flows cannot, by definition, compress anything except through shock waves. That seems like something that would be important to mention. Where did they get all these numbers for the compression ratios?! And this is just the beginning of a long list of issues with this page.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The theory of aerodynamics and compressible gas dynamics is surprisingly young. The theory of supersonic shock waves was only developed in 1908, and theoretical solutions to fundamental problems such as flow fields over supersonic blunt bodies were still actively being researched until the mid 1960s. <a href=https://en.wikipedia.org/wiki/Ludwig_Prandtl>Ludwig Prandtl</a>, considered to be the father of aerodynamics, died in 1953 and was still actively performing research.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>The flow is usually understood to be due to a difference in pressure, but to be pedantic, it is really a difference in <em>free energy</em>. Pressure is just potential kinetic energy.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>This doesn&rsquo;t hold for Mach numbers > 5.0, but in many cases is actually a fairly reasonable assumption for speeds below that and will generally get you within +/- 10% of the actual answer.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>This is not really an apples-to-apples comparison, since aircraft, as previously mentioned, have free-flowing air around them. Transonic aircraft will experience <a href=https://en.wikipedia.org/wiki/Critical_Mach_number>localized shock wave formation</a> which will result in significantly increased drag, which I ballpark to be within the same order of magnitude as in a Hyperloop pod traveling at its choking velocity.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>There should also be a point where the drag will begin to <em>decrease</em>, as more of the flow becomes supersonic and the boundary layer experiences less disruption. So it&rsquo;s not like the drag will continue to monotonically increase, either.&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:8><p>To be clear, I am only commenting on the phenomenon as opposed to implying any kind of moral culpability on the part of Youtubers. I don&rsquo;t think it&rsquo;s reasonable to expect them to do this much digging to get the proper background on a very niche aerodynamics effect.&#160;<a href=#fnref:8 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-info><div class="post-date dt-published">2022-07-16</div><a class="post-hidden-url u-url" href=https://liem.ca/posts/kantrowitz/>https://liem.ca/posts/kantrowitz/</a>
<a href=https://liem.ca class="p-name p-author post-hidden-author h-card" rel=me>Liem Dam-Quang</a><div class=post-taxonomies><ul class=post-categories><li><a href=https://liem.ca/categories/engineering/>engineering</a></li></ul></div></div></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity=sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js integrity=sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>© Liem Dam-Quang, 2023<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, and <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div></div><p class="h-card vcard"><a href=https://liem.ca class="p-name u-url url fn" rel=me>Liem Dam-Quang</a></p></footer></div></body></html>